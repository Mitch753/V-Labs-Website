/*! For license information please see profile.min.js.LICENSE.txt */
(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[9246],{3075:e=>{e.exports=function(){return this.wp.i18n}()},8601:e=>{e.exports=function(){return this.wp.element}()},20816:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(82284);function s(e){var t=function(e){if("object"!=(0,n.A)(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=(0,n.A)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,n.A)(t)?t:t+""}},30177:e=>{e.exports=function(){return this.itsec.pages.profile}()},31987:e=>{e.exports=function(){return this.wp.data}()},38125:e=>{e.exports=function(){return this.wp.plugins}()},39959:e=>{e.exports=function(){return this.wp.components}()},46627:e=>{e.exports=function(){return this.itsec.packages.data}()},50735:(e,t,r)=>{"use strict";var n=r(51609),s=r(38125),i=r(3075),o=r(85631),a=r.n(o),l=r(31987),c=r(53390),u=r(46627),d=r(8601),m=r(39959),p=r(98883),h=r(81923);const f=(0,h.A)("form",{target:"ednh0rl7"})('display:grid;grid-template-columns:0.75fr 0.25fr;gap:1.25rem 0.5rem;grid-auto-flow:row;grid-template-areas:"title ." "description ." "label ." "role days" "error ." "button .";align-items:center;@media screen and (min-width: ',(({theme:e})=>e.breaks.small),'px){grid-template-columns:1fr 1fr 0.5fr 0.5fr;gap:0.5rem 1rem;grid-template-areas:"title role days button" "description role days button" ". error . .";}'),g=(0,h.A)(c.EY,{target:"ednh0rl6"})({name:"1ce9wo2",styles:"grid-area:title"}),v=(0,h.A)("div",{target:"ednh0rl4"})("grid-area:role;& label{text-transform:none!important;font-family:'SF Pro Text',sans-serif;font-size:0.813rem!important;color:",(({theme:e})=>e.colors.text.dark),";}"),w=(0,h.A)(m.TextControl,{target:"ednh0rl3"})("grid-area:days;& label{text-transform:none!important;font-family:'SF Pro Text',sans-serif;font-size:0.813rem!important;color:",(({theme:e})=>e.colors.text.dark),";}"),E=(0,h.A)(c.EY,{target:"ednh0rl2"})({name:"1x9glg",styles:"grid-area:description"}),b=(0,h.A)(c.$n,{target:"ednh0rl1"})("grid-area:button;border-color:",(({theme:e})=>e.colors.primary.base),";"),y=(0,h.A)(c.EY,{target:"ednh0rl0"})({name:"r94zv",styles:"grid-area:error;color:#D63638"});function x({userId:e,userRoles:t}){const[r,s]=(0,d.useState)(t[0].role),[o,h]=(0,d.useState)(0),{fetchUser:x}=(0,l.useDispatch)(u.coreStore),k=(0,d.useCallback)((()=>a()({method:"POST",path:"ithemes-security/rpc/privilege/escalate",data:{id:e,role:r,days:o}}).then((()=>x(e)))),[e,r,o,x]),{status:A,execute:I,error:R}=(0,p.Yb)(k,!1);return(0,n.createElement)(f,null,(0,n.createElement)(g,{variant:c.J3.DARK,weight:c.uL.HEAVY,text:(0,i.__)("Set Temporary Role","it-l10n-ithemes-security-pro")}),(0,n.createElement)(E,{variant:c.J3.MUTED,text:(0,i.__)("Set the role which you would like to assign to the user temporarily and for how long you would like it to last.","it-l10n-ithemes-security-pro")}),(0,n.createElement)(v,null,(0,n.createElement)(m.SelectControl,{label:(0,i.__)("Select a role for this user","it-l10n-ithemes-security-pro"),name:"itsec_privilege_profile[role]",value:r,onChange:s},t.map((({role:e,label:t})=>(0,n.createElement)("option",{value:e,key:e},t))))),(0,n.createElement)(w,{label:(0,i.__)("Day(s)","it-l10n-ithemes-security-pro"),id:"itsec_privilege_expires",type:"number",min:"1",value:o,onChange:h}),(0,n.createElement)(b,{onClick:I,isBusy:"pending"===A,variant:"primary",text:(0,i.__)("Update User","it-l10n-ithemes-security-pro")}),R&&(0,n.createElement)(y,{text:R.message}))}var k=r(89959);const A=(0,h.A)("div",{target:"ek65o9z4"})("display:grid;grid-gap:1.25rem;grid-template-areas:'title' 'escalated' 'error' 'clearButton';@media screen and (min-width: ",(({theme:e})=>e.breaks.medium),"px){grid-template-columns:0.25fr 0.5fr 0.25fr;grid-template-areas:'title escalated clearButton' '. error .';}"),I=(0,h.A)(c.EY,{target:"ek65o9z3"})({name:"1ce9wo2",styles:"grid-area:title"}),R=(0,h.A)(c.EY,{target:"ek65o9z2"})({name:"8pntvs",styles:"grid-area:escalated"}),L=(0,h.A)(c.$n,{target:"ek65o9z1"})({name:"kcuans",styles:"grid-area:clearButton;max-width:200px"}),O=(0,h.A)(c.EY,{target:"ek65o9z0"})({name:"r94zv",styles:"grid-area:error;color:#D63638"});function S({userId:e,isEscalated:t,tempRoleExpiration:r,maxPermission:s}){const{fetchUser:o}=(0,l.useDispatch)(u.coreStore),m=(0,d.useCallback)((()=>a()({method:"POST",path:"ithemes-security/rpc/privilege/clear",data:{id:e}}).then((()=>o(e)))),[e,o]),{status:h,execute:f,error:g}=(0,p.Yb)(m,!1);return(0,n.createElement)(A,null,(0,n.createElement)(I,{variant:c.J3.DARK,weight:c.uL.HEAVY,text:(0,i.__)("Set Temporary Role","it-l10n-ithemes-security-pro")}),s&&!t&&(0,n.createElement)(c.EY,{text:(0,i.__)("This user has already been permanently upgraded to the maximum level. No further action can be taken.","it-l10n-ithemes-security-pro")}),t&&(0,n.createElement)(React.Fragment,null,(0,n.createElement)(R,{as:"p"},(0,d.createInterpolateElement)((0,i.sprintf)((0,i.__)("The user has already been temporarily upgraded to the role of <b>%1$s</b>. This upgrade expires at <b>%2$s</b>.","it-l10n-ithemes-security-pro"),t,(0,k.dateI18n)("M d, Y g:i A",r)),{b:(0,n.createElement)("strong",null)})),g&&(0,n.createElement)(O,{text:g.message}),(0,n.createElement)(L,{onClick:f,isBusy:"pending"===h,variant:"primary",text:(0,i.__)("Click to Clear User Privilege")})))}const _=(0,h.A)(c.DZ,{target:"e83eh1d1"})({name:"k82dzb",styles:"margin:2rem 0"}),C=(0,h.A)("div",{target:"e83eh1d0"})({name:"77bbu2",styles:"max-width:800px;padding-bottom:100px"});function P({adminUrl:e,clearPrivilegeNonce:t,userId:r}){const{isMultisite:s,user:o}=(0,l.useSelect)((e=>({isMultisite:e(u.coreStore).getSiteInfo()?.multisite,user:e(u.coreStore).getUser(r)})),[r]),a=o?.solid_privilege?.role,d=o?.solid_privilege?.expires,m=o?.roles.includes("administrator")||o?.roles.includes("super-admin"),p=function(e){const t=[{role:"",label:(0,i.__)("Select Role","it-l10n-ithemes-security-pro"),value:"0"},{role:"editor",label:(0,i.__)("Editor","it-l10n-ithemes-security-pro"),value:"1"},{role:"administrator",label:(0,i.__)("Administrator","it-l10n-ithemes-security-pro"),value:"2"}];return e&&t.push({role:"super-admin",label:(0,i.__)("Network Administrator","it-l10n-ithemes-security-pro"),value:"3"}),t}(s),h=p.filter((e=>!o.roles.includes(e.role)));return(0,n.createElement)(C,null,(0,n.createElement)(_,{level:3,size:c.$C.LARGE,variant:c.J3.DARK,weight:c.uL.HEAVY,text:(0,i.__)("Temporary Privilege Escalation","it-l10n-ithemes-security-pro")}),a||m?(0,n.createElement)(S,{adminUrl:e,clearPrivilegeNonce:t,isEscalated:a,tempRoleExpiration:d,userId:r,userRoles:h,maxPermission:m}):(0,n.createElement)(x,{tempRoleExpiration:d,userId:r,userRoles:h}))}var N=r(30177);r.p=window.itsecWebpackPublicPath,(0,i.setLocaleData)({"":{}},"ithemes-security-pro"),(0,s.registerPlugin)("itsec-privilege-profile",{render:()=>(0,n.createElement)(N.UserProfileFill,null,(({name:e,userId:t})=>"itsec-privilege-profile"===e&&(0,n.createElement)(P,{userId:t}))),order:4,label:(0,i.__)("Privilege Escalation","it-l10n-ithemes-security-pro"),scope:"solid-security-user-profile",isAvailable:()=>a()({method:"OPTIONS",path:"ithemes-security/rpc/privilege/escalate",parse:!1}).then((e=>!!e.headers.get("allow")?.includes("POST")))})},51609:e=>{"use strict";e.exports=window.React},55933:e=>{e.exports=function(){return this.wp.primitives}()},64467:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(20816);function s(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},66087:e=>{"use strict";e.exports=window.lodash},77172:e=>{e.exports=function(){return this.wp.url}()},79860:e=>{e.exports=function(){return this.wp.keycodes}()},85631:e=>{e.exports=function(){return this.wp.apiFetch}()},89897:e=>{e.exports=function(){return this.wp.compose}()},89959:e=>{e.exports=function(){return this.wp.date}()},98883:(e,t,r)=>{"use strict";r.d(t,{Yb:()=>v,ML:()=>w,$I:()=>b,Mj:()=>y,SV:()=>x,ob:()=>k,ee:()=>g,sy:()=>c,qY:()=>u,kk:()=>h,wl:()=>p,pq:()=>a,xl:()=>m});var n=r(58168),s=r(51609),i=r(8601),o=r(89897);function a(e){return(0,o.createHigherOrderComponent)((t=>class extends i.Component{render(){return(0,s.createElement)(t,(0,n.A)({},this.props,e))}}),"withProps")}var l=r(66087);function c(e,t,r={}){return(0,o.createHigherOrderComponent)((n=>class extends i.Component{constructor(){super(...arguments),this.debouncedPropInvoke=(0,l.debounce)(((...t)=>this.props[e](...t)),"function"==typeof t?t(this.props):t,r),this.handler=(e,...t)=>(e&&"function"==typeof e.persist&&e.persist(),this.debouncedPropInvoke(e,...t))}componentWillUnmount(){this.debouncedPropInvoke.cancel()}render(){const t={...this.props,[e]:this.handler};return(0,s.createElement)(n,t)}}),"withDebounceHandler")}function u(e,t){let r;return r=(0,l.isFunction)(t)?[{delay:e,cb:t}]:e,(0,o.createHigherOrderComponent)((e=>class extends i.Component{constructor(){super(...arguments),this.intervalIds=[]}componentDidMount(){for(const e of r)(t=>{this.intervalIds.push(setInterval((()=>t(this.props)),e.delay))})(e.cb)}componentWillUnmount(){this.intervalIds.forEach(clearInterval)}render(){return(0,s.createElement)(e,this.props)}}),"withInterval")}var d=r(64467);const m=(0,o.createHigherOrderComponent)((e=>class extends i.Component{constructor(...e){super(...e),(0,d.A)(this,"state",{width:1280}),(0,d.A)(this,"mounted",!1),(0,d.A)(this,"containerRef",(0,i.createRef)()),(0,d.A)(this,"resizeObserver",null),(0,d.A)(this,"onWindowResize",(()=>{if(!this.mounted||!this.containerRef.current)return;const e=this.containerRef.current.offsetWidth;this.setState({width:e})}))}componentDidMount(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize);const e=document.getElementById("collapse-button");e?.addEventListener("click",this.onWindowResize),"ResizeObserver"in window&&this.containerRef.current?(this.resizeObserver=new window.ResizeObserver((([e])=>{if(!this.mounted)return;const t=Math.round(e.contentRect.width);this.setState({width:t})})),this.resizeObserver.observe(this.containerRef.current)):this.onWindowResize()}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize);const e=document.getElementById("collapse-button");e?.removeEventListener("click",this.onWindowResize),this.resizeObserver?.disconnect()}render(){const{measureBeforeMount:t=!1,className:r,style:i,...o}=this.props;return t&&!this.mounted?(0,s.createElement)("div",{className:r,style:i,ref:this.containerRef}):(0,s.createElement)("div",{ref:this.containerRef,className:r,style:i},(0,s.createElement)(e,(0,n.A)({},o,{width:this.state.width+20})))}}),"withWidth"),p=(0,o.createHigherOrderComponent)((e=>class extends i.Component{constructor(){super(...arguments),(0,d.A)(this,"state",{pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}}),(0,d.A)(this,"mounted",!1),this.listener=this.listener.bind(this),this.onBlur=this.onBlur.bind(this)}componentDidMount(){this.mounted=!0,window.addEventListener("keydown",this.listener),window.addEventListener("keyup",this.listener),window.addEventListener("click",this.listener),window.addEventListener("blur",this.onBlur)}componentWillUnmount(){this.mounted=!1,window.removeEventListener("keydown",this.listener),window.removeEventListener("keyup",this.listener),window.removeEventListener("click",this.listener),window.removeEventListener("blur",this.onBlur)}listener(e){this.mounted&&this.setState({pressed:{shift:e.shiftKey,ctrl:e.ctrlKey,meta:e.metaKey,alt:e.altKey}})}onBlur(){this.setState({pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}})}render(){return(0,s.createElement)(e,(0,n.A)({pressedModifierKeys:this.state.pressed},this.props))}}),"withPressedModifierKeys"),h=(0,o.createHigherOrderComponent)((e=>function({navigate:t,...r}){return(0,s.createElement)(e,(0,n.A)({},r,{onClick:e=>{try{r.onClick&&r.onClick(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||r.target&&"_self"!==r.target||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),t())}}))}),"withNavigate"),f=new WeakMap;function g(e,t){(0,i.useLayoutEffect)((()=>{f.has(e)||(t(),f.set(e,!0))}),[])}function v(e,t=!0){const[r,n]=(0,i.useState)("idle"),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)(null),c=(0,i.useCallback)(((...t)=>(n("pending"),l(null),e(...t).then((e=>{o(e),n("success")})).catch((e=>{l(e),o(null),n("error")})))),[e]);return(0,i.useEffect)((()=>{t&&c()}),[c,t]),{execute:c,status:r,value:s,error:a}}function w(e,t,r=window){const n=(0,i.useRef)();(0,i.useEffect)((()=>{n.current=t}),[t]),(0,i.useEffect)((()=>{if(!r||!r.addEventListener)return;const t=e=>n.current(e);return r.addEventListener(e,t),()=>r.removeEventListener(e,t)}),[e,r])}const E=["button","submit"];function b(e){const t=(0,i.useRef)(e);(0,i.useEffect)((()=>{t.current=e}),[e]);const r=(0,i.useRef)(!1),n=(0,i.useRef)(),s=(0,i.useCallback)((()=>{clearTimeout(n.current)}),[]);(0,i.useEffect)((()=>()=>s()),[]),(0,i.useEffect)((()=>{e||s()}),[e,s]);const o=(0,i.useCallback)((e=>{const{type:t,target:n}=e;(0,l.includes)(["mouseup","touchend"],t)?r.current=!1:function(e){if(!(e instanceof window.HTMLElement))return!1;switch(e.nodeName){case"A":case"BUTTON":return!0;case"INPUT":return(0,l.includes)(E,e.type)}return!1}(n)&&(r.current=!0)}),[]),a=(0,i.useCallback)((e=>{e.persist(),r.current||(n.current=setTimeout((()=>{document.hasFocus()?"function"==typeof t.current&&t.current(e):e.preventDefault()}),0))}),[]);return{onFocus:s,onMouseDown:o,onMouseUp:o,onTouchStart:o,onTouchEnd:o,onBlur:a}}function y(e,t){const[r,n]=(0,i.useState)((()=>{try{const r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(e){return console.error(e),t}}));return[r,t=>{try{const s=t instanceof Function?t(r):t;n(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error(e)}}]}function x(e){const t=(0,i.useRef)(null),r=(0,i.useRef)(!1),n=(0,i.useRef)(e),s=(0,i.useRef)(e);return s.current=e,(0,i.useLayoutEffect)((()=>{e.forEach(((e,s)=>{const i=n.current[s];"function"==typeof e&&e!==i&&!1===r.current&&(i(null),e(t.current))})),n.current=e}),e),(0,i.useLayoutEffect)((()=>{r.current=!1})),(0,i.useCallback)((e=>{t.current=e,r.current=!0,(e?s.current:n.current).forEach((t=>{"function"==typeof t?t(e):t&&t.hasOwnProperty("current")&&(t.current=e)}))}),[])}function k(e=[]){const[t,r]=(0,i.useState)(e);return[t,(0,i.useCallback)((e=>r((t=>[...t,e]))),[]),(0,i.useCallback)((e=>r((t=>t.filter((t=>t!==e))))),[]),r]}r(31987),r(46627)}},e=>{e.O(0,[3390],(()=>e(e.s=50735)));var t=e.O();((window.itsec=window.itsec||{}).privilege=window.itsec.privilege||{}).profile=t}]);